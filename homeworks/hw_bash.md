1. >Есть скрипт: a=1 b=2 c=a+b d=$a+$b e=$(($a+$b))  -> Какие значения переменным c,d,e будут присвоены?  Почему?   
  
В переменной "c" будет храниться алгоритм сложения переменной "a" и "b"  
В переменной "d" будет храниться суммирование значений переменных a и b, т.е. 3  
В переменной "e" будет храниться суммирование значений переменных a и b, т.е. 3. Это синтаксис баша... без двойных скобок баш не поймет арифметику  
  
2. >На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным. В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить   
  
```#!/bin/bash
while ((1==1))
do
        curl https://localhost:4757
        if (($? != 0))
        then
                echo "`date`  -> Service is Down" > curl.log
        else
                echo "`date`  -> Service is UP" > curl.log
        break
        fi
sleep 30s
done
```
  
Можно еще с перенаправлением поиграться, мб более интересно было бы перезаписывать, а не дозаписывать.  

3. >Необходимо написать скрипт, который проверяет доступность трёх IP: `192.168.0.1, 173.194.222.113, 87.250.250.242` по `80` порту и записывает результат в файл log. Проверять доступность необходимо пять раз для каждого узла.
  
первый вариант с пингом. Отправляем по 5 пакетов, но 80 порт не затронули, ибо пинг же...
  
```#!/bin/bash
hosts=("192.168.0.1" "173.194.222.113" "87.250.250.242")
for host in ${hosts[@]}; do
          result=$(ping -c 5 -W  1 -q  $host | grep transmitted)
          pattern="0 received";
          if [[ $result =~ $pattern ]]; then
                echo "$host is down" >> result_chk-PING.log
          else
                echo "$host is up" >> result_chk-PING.log
          fi
done
```  
  
Попробуем сделать все тоже самое, только через `nc`, но только добавим кол-во переборов  
  
```#!/bin/bash
for n in {1..5}; do {
hosts=("192.168.0.1" "173.194.222.113" "87.250.250.242")
port=("80")
for host in ${hosts[@]}; do
          nc -z $host $port
          if (($?==0)); then
                echo "`date` ->    $host:$port is available" >> result_chk-NC.log
          else
                echo "`date` ->    $host:$port is Not_available" >> result_chk-NC.log
          fi
done
                  }
done
```
  
![Screenshot](https://gitlab.com/SobolevES/devops-netology/-/raw/main/pics/3_bash.JPG) 
  
4. >Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается
  
```#!/bin/bash
while ((1==1))
do {
hosts=("192.168.0.1" "173.194.222.113" "87.250.250.242")
port=("80")
for host in ${hosts[@]}; do
          nc -z $host $port
          if (($?==0)); then
                echo "`date` ->    $host:$port is available" > ok.log
          else
                echo "`date` ->    $host:$port is Not_available" > error.log
          break
          fi
sleep 30s
done
}
done
```





