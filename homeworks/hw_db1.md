1. >Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.  
Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД.  
Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.  
  
**Электронные чеки в json виде**    --->   MongoDB (как раз на JSON-подобных документах и специализируется, поэтому смысла что то придумывать нету, когда есть монго))  
  
**Склады и автомобильные дороги для логистической компании**    --->   Oracle (логистика на первый взгляд просто, на самом деле данных будет тьма, от геоданных до списка сотрудников, работающих в данной сфере. Постоянно нужно будет делать какие то сложные запросы, отчеты... поэтому нужна хорошая мощная СУБД)  
  
**Генеалогические деревья**    --->   PostgreSQL, например Модуль ltree (сам не работал с постгри, прочитал тут https://bitworks.software/2017-10-20-storing-trees-in-rdbms.html)  
  
**Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации**    --->  REDIS (одной из особенностей редиса - это скорость. т.к. даные лежат в памяти, а так же редис умеет сопоставлять ключи или токены с авторизациями юзера, что в принципе нам и нужно)  
  
**Отношения клиент-покупка для интернет-магазина**    --->   MySQL (бесплатная реляционная система управления базами данных, а что нужно для интернет-магазина :), насколько мне известно это одно из самых популярных решений для таких проектов )  
  
2. >Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме.  
Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):
  
  C - Consistency/Согласованность данных.То есть данные должны быть полными и непротиворечивыми (в том числе и во всех узлах кластера).  
  A - Availability/Доступность. Грубо говоря, это скорость ответа сервера на наш запрос (для записи или чтения).  
  P - Partition tolerance/Устойчивость к разделению.Это значит, что в случае разделения системы на несколько частей каждая из них, если она доступна, должна быть в состоянии работать автономно, отдавая корректный отклик и предоставляя свои данные. Обрыв связей в кластере не должен влиять на итоговую работу.  
  
Данные записываются на все узлы с задержкой до часа (асинхронная запись) --->+ жертвуем согласованностью  /AP-система (Availability + Partition tolerance – Consistency)  
При сетевых сбоях, система может разделиться на 2 раздельных кластера    --->+ жертвуем устойчивостью к разделению  /CA (Availability + Consistency – Parition tolerance)  
Система может не прислать корректный ответ или сбросить соединение       --->+ жертвуем доступностью  /CP-система (Consistency + Partition tolerance – Availability)  
  
>А согласно PACELC-теореме, как бы вы классифицировали данные реализации?
 
IF P -> (C or A), ELSE (C or L).  
  
PACELC:  
Данные записываются на все узлы с задержкой до часа (асинхронная запись) --->+  PA/EL  (согласованность может страдать в пользу доступности при разделении, а при нормальной работе – в пользу более низкой задержки времени)  
При сетевых сбоях, система может разделиться на 2 раздельных кластера    --->+  PA/EC (ставка делается на доступность, а при отсутствии распределения – на консистентность)  
Система может не прислать корректный ответ или сбросить соединение       --->+  PC/EC (в большинстве случаев гарантирует согласованность операций чтения и записи, оплачивая затраты на доступность временем ожидания ее достижения)  
  
3. >Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?
  
Может я конечно не правильно понимаю вопрос, но для меня ответ Да.  
Почему "Да"? Я точно знаю, что приложение можно одновременно нацелить, как на ACID (например, оракловая бд - вся инфа приклада хранится и пишется в базу), так и на BASE (например, редис - сливаем сюда кэш и при необходимости можем в любой момент к нему обратится или почистить).  
Все это прописывается в конфиге приложения и прекрасно работает.  
  
4. >Вам дали задачу написать системное решение, основой которого бы послужили:  
-фиксация некоторых значений с временем жизни  
-реакция на истечение таймаута  
Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?
   
---
redis.  
В этом задании прям хочется использовать REDIS, т.к. одной из важных его функций как раз является доступ к данным по ключу (key-value хранилище).  
Он умеет писать данные в память, можно быстро к ним обращаться, а так же можно прописать время жизни ключа, чтобы редис сам удалял нерелевантные данные.  
Ну а далее можно применить механизм pub/sub,  в redis подписываемся на канал и слушаем все события, как только словили наше, обрабатываем логикой, которую заложили.  
Ну или наоборот, со стороны redis'а отправляем сообщения в канал, в результате чего все, кто подписаны на наш канал получат сообщение.  
Главный минус механизма pub/sub  - это не гарантированная доставка сообщений, их консистентность.  
---
мб рассмотреть и такой вариант? в роли key-value  возьмем теги и их значения которые прописаны в xml) :  
В цепочке реализации между Publisher и Subscriber есть связующее звено - шина.  
наверное главный недостаток это когда один из этих участников процесса будет сбоить.  
Например, возьмем пример из моих рабочих будней саппорта.  
Есть "система А" которая общается через тибко с "системой Б". В один прекрасный, солнечный день "система А" отправила запрос "системе Б", но т.к.  
на "системе Б" был сбой, слушатели не смогли принять сообщения от шины, и шина вернула ответ "системе А" с кодом ошибки time_out. Что это значит...  
Это запрос от А до шины таймаут? или все таки от А до Б...? Все сообщения отвалились, на системе А необходимо через какое то время толкать всю пачку повторно...  
Минус, да еще какой. Было бы замечательно же чтобы все лежало в очереди на тибке, но а если сбой будет не один час, очередь не резиновая же... Поэтому таймауты.  
  
Либо если очередь на тибке зависнет, что на практике я встречал не однократно. Посредник... убрать бы его, но увы шина нам xml в правильный формат преобразует.  
Но несмотря на такие недостатки без шины сложно представить интеграцию, а сбои присущи всем системам)  